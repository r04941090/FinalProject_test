<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css"
    integrity="sha384-SZXxX4whJ79/gErwcOYf+zWLeJdY/qpuqC4cAa9rOGUstPomtqpuNWT9wdPEn2fk" crossorigin="anonymous">
  <link rel="stylesheet" href="/css/Blog.css">
  <script src="https://unpkg.com/vue@next"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@ckeditor/ckeditor5-vue@2.0.1/dist/ckeditor.min.js"></script>
  <script src="/js/ckeditor.js"></script>
  <link rel="stylesheet" href="/css/Loading.css">
  <title>Document</title>
</head>

<body>
  <div id="app" style="position: relative;">
    <div style="height: 60px; background-color: #000; width: 100%;"></div>
    <div class="Loading-container" style="background-color: #fff; height: calc(100vh - 60px); top: 60px;" v-if="initialLoading">
      <div class="sk-fading-circle">
          <div class="sk-fading-circle1 sk-child-first"></div>
          <div class="sk-fading-circle2 sk-child-first"></div>
          <div class="sk-fading-circle3 sk-child-first"></div>
          <div class="sk-fading-circle4 sk-child-first"></div>
          <div class="sk-fading-circle5 sk-child-first"></div>
          <div class="sk-fading-circle6 sk-child-first"></div>
          <div class="sk-fading-circle7 sk-child-first"></div>
          <div class="sk-fading-circle8 sk-child-first"></div>
          <div class="sk-fading-circle9 sk-child-first"></div>
          <div class="sk-fading-circle10 sk-child-first"></div>
          <div class="sk-fading-circle11 sk-child-first"></div>
          <div class="sk-fading-circle12 sk-child-first"></div>
      </div>
  </div>
    <div class="position-relative">
      <div class="blog-banner" :style="{backgroundImage: `url(${bloggerData.CoverImage})`}">
      </div>
      <div class="d-flex flex-column align-items-center position-absolute user-details">
        <input type="file" class="cover-file" style="display:none" ref="userPhoto" v-on:change="getUserPhoto">
        <div class="user-icon mb-1" :style="{backgroundImage: `url(${bloggerData.UserPhoto})`}" title="bloggerData.UserName" >
          <i class="fas fa-camera update-user-photo" v-show="visitorId == bloggerData.UserId" v-on:click="callUserPhoto"></i>
        </div>
        <p class="user-name m-0 fs-4">{{ bloggerData.UserName }}</p>
        <p class="user-id fs-6 mb-2">@{{ bloggerData.AccountId }}</p>
        <!-- 自己的部落格不會有 -->
        <button class="blogger-trace" v-show="(visitorId !== null) && (visitorId != bloggerData.UserId)" :class="{'tracing': bloggerData.TraceOrNot}" v-on:click="updateTrace(bloggerData.UserId, bloggerData)">
          {{ bloggerData.TraceOrNot ? '追蹤中' : '追蹤' }}
        </button>
        
      </div>
    </div>
    <div class="container blog-content-container">
      <div class="blog-content m-auto">
        <ul class="blog-content-list d-flex border-bottom ps-0 m-0">
          <li class="me-2 h-100 p-2" v-on:click="currentPage = '簡介'" :class="{'listChange': currentPage == '簡介'}">
            <span class="blog-content-title">簡介</span>
          </li>
          <li class="mx-3 p-2" v-if="accountId == 'TripWay'" v-on:click="currentPage = '商品'" :class="{'listChange': currentPage == '商品'}">
            <span class="blog-content-product-number">{{ page.productPage}}</span>
            <span class="blog-content-title"> 商品</span>
          </li>
          <li class="mx-2 p-2" v-on:click="getBlogJournal(1)" :class="{'listChange': currentPage == '旅遊回憶'}">
            <span class="blog-content-memory-number">{{ page.journalPage }}</span>
            <span class="blog-content-title"> 旅遊回憶</span>
          </li>
          <li class="mx-2 p-2" v-on:click="getBlogPlan(1)" :class="{'listChange': currentPage == '行程'}">
            <span class="blog-content-tour-number">{{ page.planPage }}</span>
            <span class="blog-content-title"> 行程</span>
          </li>
          <li class="mx-2 p-2" v-on:click="currentPage = '景點收藏'" :class="{'listChange': currentPage == '景點收藏'}">
            <span class="blog-content-place-number">{{ page.attractionPage }}</span>
            <span class="blog-content-title"> 景點收藏</span>
          </li>
          <li class="mx-2 p-2" v-on:click="getBlogLike()" :class="{'listChange': currentPage == '讚'}">
            <span class="blog-content-like-number">{{ page.likePage }}</span>
            <span class="blog-content-title"> 讚</span>
          </li>
          <li class="mx-2 p-2" v-on:click="getFans(1)" :class="{'listChange': currentPage == '粉絲'}">
            <span class="blog-content-fans-number">{{ page.fansPage }}</span>
            <span class="blog-content-title"> 粉絲</span>
          </li>
          <li class="mx-2 p-2" v-on:click="currentPage = '追蹤中'" :class="{'listChange': currentPage == '追蹤中'}">
            <span class="blog-content-follow-number">0</span>
            <span class="blog-content-title">追蹤中</span>
          </li>
        </ul>
        <!-- 簡介 -->
        <div v-if="currentPage == '簡介'" style="min-height: 1310px;">
          <div class="mt-2" style="border-bottom: 1px solid #dee2e6; padding-bottom: 20px; padding-top: 10px;" :class="{'intro-edit': visitorId == bloggerData.UserId}">
            <ckeditor :editor="editor" :config="editorConfig" v-model="bloggerData.UserIntro" v-if="visitorId == bloggerData.UserId"></ckeditor>
            <div style="max-height: 180px; overflow: auto;" v-html="bloggerData.UserIntro" v-else></div>
          </div>
          <div>
          </div>
          <div class="d-flex py-2 mt-3" v-if="bloggerData.BlogProductCard.length !== 0">
            <div style="font-weight: bold; font-size: 18px;">商品</div>
            <div class="more ms-auto" id="tourMore" >更多</div>
          </div>
          <product-card :card-data="bloggerData.BlogProductCard"></product-card>
          <div class="d-flex py-2 mt-3" v-if="bloggerData.BlogPlanCard.length !== 0">
            <div style="font-weight: bold; font-size: 18px;">行程</div>
            <div class="more ms-auto" id="tourMore" @click="getBlogPlan(1)">更多</div>
          </div>
          <plan-journal-card :card-data="bloggerData.BlogPlanCard" v-on:update-like="updateLike" :visitor="visitorId"></plan-journal-card>
          <div class="d-flex py-2 mt-3" v-if="bloggerData.BlogJournalCard.length !== 0">
            <div style="font-weight: bold; font-size: 18px;">旅遊回憶</div>
            <div class="more ms-auto" id="tourMore" @click="getBlogJournal(1)">更多</div>
          </div>
          <plan-journal-card :card-data="bloggerData.BlogJournalCard" v-on:update-like="updateLike" :visitor="visitorId"></plan-journal-card>
        </div>
        <div v-if="currentPage !== '簡介'" style="min-height: 1310px; position: relative;">
          <loading :loading="loading" style="position: absolute;"></loading>
          <!-- Product -->
          <div v-if="currentPage == '商品'"></div>

          <!-- Plan -->
          <div v-if="currentPage == '行程'">
            <plan-journal-card :card-data="selectBlogCard.selectBlogPlanCard" v-on:update-like="updateLike"  :visitor="visitorId"></plan-journal-card>
          </div>
          <!-- Journal -->
          <div v-if="currentPage == '旅遊回憶'">
            <plan-journal-card :card-data="selectBlogCard.selectBlogJournalCard" v-on:update-like="updateLike" :visitor="visitorId"></plan-journal-card>
          </div>
          
          <!-- 景點收藏，一次顯示20個 -->
          <div style="margin-top: 10px;" v-if="currentPage == '景點收藏'" >
            <a :href=`/posi/${item.PlaceName}` class="attraction-collection" v-for="item in totalAttraction">
              <div style="margin-left: 10px;">
                {{ item.PlaceName }}
              </div>
              <div class="attraction-collection-img">
                <img :src="item.PlaceImage" alt="">
              </div>
            </a>
          </div>

          <!-- Like -->
          <div style="margin-top: 10px;" v-if="currentPage == '讚'">
            <!-- checkbox -->

            <!-- Product -->
            <div>
              <div>商品</div>
              <product-card :card-data="bloggerLikeData.BlogProductLikeCard"></product-card>
            </div>
            <!-- Plan -->
            <div>
              <div>行程</div>
              <plan-journal-card :card-data="bloggerLikeData.BlogPlanLikeCard" v-on:update-like="updateLike"  :visitor="visitorId"></plan-journal-card>
            </div>

            <!-- Journal -->
            <div>
              <div>旅遊回憶</div>
              <plan-journal-card :card-data="bloggerLikeData.BlogJournalLikeCard" v-on:update-like="updateLike" :visitor="visitorId"></plan-journal-card>
            </div>
          </div>
          <!-- fans -->
          <div v-if="currentPage == '粉絲'" style="min-height: 1310px;">
            <div class="d-flex align-items-center p-2 personal-list" v-for="item in blogFans">
              <a :href='item.AccountId' style="text-decoration: none;">
                <div class="author-content d-flex align-items-center">
                  <div class="author-content-img">
                    <img :src="item.UserPhoto" alt="" class="h-100">
                  </div>
                  <div class="author-content-name ms-2" style="color: #000">{{ item.UserName }}</div>
                </div>
              </a>
              <div class="author-track ms-auto" :class="{'tracing': item.TraceOrNot}" v-if="item.UserId != visitorId" v-on:click="updateTrace(item.UserId, item)" >
                {{ item.TraceOrNot ? '追蹤中' : '追蹤' }}
              </div>
            </div>
            
          </div>

          <!-- trace  -->
          <div></div>

          <!-- pagnition (不做成元件) -->
          <!--  -->
          <div class="d-flex justify-content-center">
            <nav aria-label="Page navigation example">
              <ul class="pagination">
                <li class="page-item" :disable="currentSelectPageInfo.current == 1" :style="{'cursor': currentSelectPageInfo.current == 1 ? 'not-allowed' : 'pointer'}">
                  <span class="page-link" href="#" aria-label="Previous">
                    <span aria-hidden="true" :class="{'page-disable': currentSelectPageInfo.current == 1}">&laquo;</span>
                  </span>
                </li>
                <li class="page-item" v-for="item in currentSelectPageInfo.total" :class="{'active': item == currentSelectPageInfo.current}" v-on:click.stop="changeData(item)" style="cursor: pointer">
                  <span class="page-link" href="#">{{ item }}</span>
                </li>
                <li class="page-item" :disable="currentSelectPageInfo.total == currentSelectPageInfo.current" :style="{'cursor': currentSelectPageInfo.current == currentSelectPageInfo.total ? 'not-allowed' : 'pointer'}">
                  <span class="page-link" href="#" aria-label="Next" >
                    <span aria-hidden="true" :class="{'page-disable': currentSelectPageInfo.current == currentSelectPageInfo.total}">&raquo;</span>
                  </span>
                </li>
              </ul>
            </nav>
          </div>
        </div>
          <!-- 景點收藏 -->
          <!-- <div class="d-flex py-2">
            <div>景點收藏</div>
            <div class="more ms-auto" id="tourMore">更多</div>
          </div>
          <div class="row my-3 blog-card">
            <div class="col-4 col-xl-3 position-relative pe-0">
              <img src="https://picsum.photos/300/250/?random=7" class="w-100 h-100 rounded">
              <p class="m-0 position-absolute text-white blog-card-day"></p>
            </div>
            <div class="col-8 col-xl-9 d-flex flex-column justify-content-between">
              <div class="blog-card-content flex-grow-1 d-flex flex-column">
                <div class="blog-card-title">
                  歐拉玩日本·金澤景點
                </div>
                <div class="blog-card-intro mt-2"></div>
              </div>
              <div class="blog-card-author d-flex align-self-start">
                <div class="blog-card-author-img me-2"></div>
                <div class="blog-card-author-name"></div>
              </div>
              <div class="d-flex align-items-end">
                <p class="m-0 blog-card-other">
                  <span class="blog-card-other">Oct 18, 2019</span>
                  <span class="blog-card-other-interval"></span>
                  <span class="blog-card-other-info">
                    <span class="blog-card-other-info-popular">78</span>人氣,
                    <span class="blog-card-other-info-like">7</span>讚
                  </span>
                </p>
                <i class="far fa-heart ms-auto blog-card-love"></i>
              </div>
            </div>
          </div>
          <div class="row my-3 blog-card">
            <div class="col-4 col-xl-3 position-relative pe-0">
              <img src="https://picsum.photos/300/250/?random=77" class="w-100 h-100 rounded">
              <p class="m-0 position-absolute text-white blog-card-day"></p>
            </div>
            <div class="col-8 col-xl-9 d-flex flex-column justify-content-between">
              <div class="blog-card-content flex-grow-1 d-flex flex-column">
                <div class="blog-card-title">
                  富山 看這篇就對了！
                </div>
                <div class="blog-card-intro mt-2"></div>
              </div>
              <div class="blog-card-author d-flex align-self-start">
                <div class="blog-card-author-img me-2"></div>
                <div class="blog-card-author-name"></div>
              </div>
              <div class="d-flex align-items-end">
                <p class="m-0 blog-card-other">
                  <span class="blog-card-other">Oct 18, 2019</span>
                  <span class="blog-card-other-interval"></span>
                  <span class="blog-card-other-info">
                    <span class="blog-card-other-info-popular">28</span>人氣,
                    <span class="blog-card-other-info-like">2</span>讚
                  </span>
                </p>
                <i class="far fa-heart ms-auto blog-card-love"></i>
              </div>
            </div>
          </div>
          <hr> -->
          <!-- 旅遊回憶 -->
        <div class="blog-content-fans" style="display: none;">
          <div class="d-flex align-items-center p-2 personal-list">
            <div class="author-content d-flex align-items-center">
              <div class="author-content-img">
                <img src="/image/user_4.jpg" alt="" class="h-100">
              </div>
              <div class="author-content-name ms-2">Penny</div>
            </div>
            <div class="author-track ms-auto">追蹤</div>
          </div>
          <div class="d-flex align-items-center p-2 personal-list">
            <div class="author-content d-flex align-items-center">
              <div class="author-content-img">
                <img src="/image/user_2.jpg" alt="" class="h-100">
              </div>
              <div class="author-content-name ms-2">Marry</div>
            </div>
            <div class="author-track ms-auto">追蹤</div>
          </div>
          <div class="d-flex align-items-center p-2 personal-list">
            <div class="author-content d-flex align-items-center">
              <div class="author-content-img">
                <img src="/image/user_3.jpg" alt="" class="h-100">
              </div>
              <div class="author-content-name ms-2">Lily</div>
            </div>
            <div class="author-track ms-auto">追蹤</div>
          </div>
        </div>
        <div class="blog-content-follow" style="display: none;">
          <div class="empty-content">
            <div class="empty-status" style="margin-top: 80px; background-image: url(/image/NoPeople.png);"></div>
            <span>你尚未追蹤任何人</span>
          </div>
          <div class="recommend-follow-list">
            <div class="headline">推薦追蹤</div>
            <div>
              <div class="d-flex align-items-center p-2 personal-list">
                <div class="author-content d-flex align-items-center">
                  <div class="author-content-img">
                    <img src="/image/user_5.jpg" alt="" class="h-100">
                  </div>
                  <div class="author-content-name ms-2">CaCa 去哪裡</div>
                </div>
                <div class="author-track ms-auto">追蹤</div>
              </div>
              <div class="d-flex align-items-center p-2 personal-list">
                <div class="author-content d-flex align-items-center">
                  <div class="author-content-img">
                    <img src="/image/user_6.jpg" alt="" class="h-100">
                  </div>
                  <div class="author-content-name ms-2">Claire</div>
                </div>
                <div class="author-track ms-auto">追蹤</div>
              </div>
              <div class="d-flex align-items-center p-2 personal-list">
                <div class="author-content d-flex align-items-center">
                  <div class="author-content-img">
                    <img src="/image/user_7.jpg" alt="" class="h-100">
                  </div>
                  <div class="author-content-name ms-2">CJ夫人愛度假</div>
                </div>
                <div class="author-track ms-auto">追蹤</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- <script src="/js/Blog.js"></script> -->
  <script>
    const planJournalCard = {
      emits: ['updateLike'],
      props: ['cardData', 'visitor'],
      template: `
        <div v-for="(item, index) in cardData">
          <div class="row my-3 blog-card">
            <div class="col-4 col-xl-3 position-relative pe-0">
              <a :href='link(item)'>
                <img src="https://picsum.photos/300/250/?random=2" class="w-100 h-100 rounded">
                <p class="m-0 position-absolute text-white blog-card-day">
                  {{ item.TotalDate }} 天
                </p>
              </a>
            </div>
            <div class="col-8 col-xl-9 d-flex flex-column justify-content-between">
              <div class="blog-card-content flex-grow-1 d-flex flex-column">
                <a :href='link(item)' style="text-decoration: none; color: #000;" >
                  <div class="blog-card-title">
                    {{ item.Title }}
                  </div>
                  <div class="blog-card-intro mt-2">
                    <p v-html="item.Intro"></p>
                  </div>
                </a>
              </div>
              <div class="blog-card-author">
                <a :href="item.AccountId" style="text-decoration: none; color: #000" class="d-flex align-self-start align-items-center">
                  <div class="blog-card-author-img me-2" :style="{'background-image': userImage(item)}"></div>
                  <div class="blog-card-author-name">{{ item.UserName }}</div>
                </a>
              </div>
              <div class="d-flex align-items-end">
                <p class="m-0 blog-card-other">
                  <span class="blog-card-other">{{ item.StartDate }} - {{ item.EndDate }}</span>
                  <span class="blog-card-other-interval">|</span>
                  <span class="blog-card-other-info">
                    <span class="blog-card-other-info-popular">{{ item.Popular }}</span>人氣,
                    <span class="blog-card-other-info-like">{{ item.Like }}</span>讚
                  </span>
                </p>
                <i class="fa-heart ms-auto blog-card-love" :style="{'color': item.LikeOrNot ? '#ff4477' : '#000'}" :class="{ 'fas': item.LikeOrNot, 'far': !item.LikeOrNot}" v-on:click="updateLike(item)" v-if="visitor != item.UserId"></i>
              </div>
            </div>
          </div>
        </div>
      `,
      methods: {
        link(item){
          let state = item.Type == '行程' ? 'trips' : 'journals'
          return `${item.AccountId}/${state}/${item.TripId}`
        },
        userImage(item) {
          return `url(${item.UserPhoto})`
        },
        updateLike(item){
          item.LikeOrNot = !item.LikeOrNot
          this.$emit('updateLike', item)
        }
      },
      
    }
    const productCard = {
      props: ['cardData'],
      template: `
        <div v-for="(item, index) in cardData">
          <div class="row my-3 blog-card" v-show="2 > index">
            <!-- 如果是在簡介頁面，則只顯示最多兩個 -->
            <div class="col-4 col-xl-3 position-relative pe-0">
              <a :href='link(item)'>
                <img src="https://picsum.photos/300/250/?random=2" class="w-100 h-100 rounded">
              </a>
            </div>
            <div class="col-8 col-xl-9 d-flex flex-column justify-content-between">
              <div class="blog-card-content flex-grow-1 d-flex flex-column">
                <a :href='link(item)' style="text-decoration: none; color: #000;" >
                  <div class="blog-card-title">
                    {{ item.Title }}
                  </div>
                </a>
              </div>
              <div class="blog-card-author d-flex align-self-start align-items-center">
                <a :href="item.AccountId" style="text-decoration: none; color: #000" class="d-flex align-self-start align-items-center">
                  <div class="blog-card-author-img me-2" :style="{'background-image': userImage(item)}"></div>
                  <div class="blog-card-author-name">{{ item.UserName }}</div>
                </a>
              </div>
              <div class="d-flex align-items-end">
                <p class="m-0 blog-card-other">
                  <span class="blog-card-other-info">
                    <span class="blog-card-other-info-popular" style="margin-left: 0px;">{{ item.Popular }}</span>人氣,
                    <span class="blog-card-other-info-like">{{ item.Like }}</span>讚
                  </span>
                </p>
                <i class="far fa-heart ms-auto blog-card-love"></i>
              </div>
            </div>
          </div>
        </div>
      `,
      methods: {
        link(item){
          return `${item.AccountId}/products/${item.TripId}`
        },
        userImage(item) {
          return `url(${item.UserPhoto})`
        }
      },
    }
    const loading = {
      props: ['loading'],
      template: `
        <div class="Loading-container" style="background-color: #fff; position: absolute" v-if="loading">
          <div class="sk-fading-circle" style="top: 70px; left: calc(50%); position: absolute">
            
            <div class="sk-fading-circle1 sk-child-first"></div>
            <div class="sk-fading-circle2 sk-child-first"></div>
            <div class="sk-fading-circle3 sk-child-first"></div>
            <div class="sk-fading-circle4 sk-child-first"></div>
            <div class="sk-fading-circle5 sk-child-first"></div>
            <div class="sk-fading-circle6 sk-child-first"></div>
            <div class="sk-fading-circle7 sk-child-first"></div>
            <div class="sk-fading-circle8 sk-child-first"></div>
            <div class="sk-fading-circle9 sk-child-first"></div>
            <div class="sk-fading-circle10 sk-child-first"></div>
            <div class="sk-fading-circle11 sk-child-first"></div>
            <div class="sk-fading-circle12 sk-child-first"></div>
          </div>
        </div>
      `
    }
    const App = {
      data() {
        return {
          userPhotoReader: '',
          userCoverImgReader: '',
          initialLoading: false,
          loading: false,
          currentPage: '簡介', 
          accountId: 'SHERRY', // 讀Razor
          userId: '', // 用accountId去讀取
          visitorId: '1', // 進來看的人  讀Razor

          urls: {
            url_GetUserId: 'https://localhost:44392/api/blogapi/GetUserId/',
            url_GetBlog: 'https://localhost:44392/api/blogapi/GetBlog',
            url_GetTotalCardNumerByState: 'https://localhost:44392/api/blogapi/GetTotalCardNumberByState/',
            url_GetTotalLikeCardNumber: 'https://localhost:44392/api/blogapi/GetTotalLikeCardNumber/',
            url_GetBlogFansNumber: 'https://localhost:44392/api/blogapi/GetBlogFansNumber/',
            url_GetBlogPlan: 'https://localhost:44392/api/blogapi/GetBlogPlan',
            url_GetBlogJournal: 'https://localhost:44392/api/blogapi/GetBlogJournal/',
            url_UpdateLike: 'https://localhost:44392/api/blogapi/UpdateLike',
            url_UpdateTrace: 'https://localhost:44392/api/blogapi/UpdateTrace',
            url_GetBlogLike: 'https://localhost:44392/api/blogapi/GetBlogLike/',
            url_GetFans: 'https://localhost:44392/api/blogapi/GetBlogFans/',
            url_GetAttraction: 'https://localhost:44392/api/planapi/GetAttractionCollection/'
          },
          currentSelectPageInfo: {
            total: 0,
            current: 1
          },
          page: {
            productPage: 0,
            planPage: 0,
            journalPage: 0,
            fansPage: 0,
            likePage: 0,
            attractionPage: 0
          },
          editor: ClassicEditor,
          editorData: '',
          editorConfig: {
            placeholder: '簡介',
            fontFamily: {
              options: [
                "default",
                "Ubuntu, Arial, sans-serif",
                "Ubuntu Mono, Courier New, Courier, monospace",
                "Microsoft JhengHei"
              ],
            },
            fontSize: {
              options: [9, 12, "default", 16, 18, 20],
            },
            toolbar: {
              items: [
                'heading', '|', 'fontSize', 'fontFamily', '|', 'fontColor', 'fontBackgroundColor', '|', 'bold', 'italic', 'underline', 'strikethrough', '|', 'alignment', '|', 'numberedList', 'bulletedList', '|', 'outdent', 'indent', '|', 'undo', 'redo'
              ]
            }
          },
          totalAttraction: [],
          selectBlogCard: {
            selectBlogPlanCard: [],
            selectBlogJournalCard: [],
            selectBlogProductCard: []
          },
          
          bloggerData: {
            BlogProductCard: [],
            BlogPlanCard: [],
            BlogJournalCard: []
          },
          bloggerLikeData: {
            BlogProductCard: [],
            BlogPlanCard: [],
            BlogJournalCard: []
          },
          blogFans: [],
          BlogCard: []
        }
      },
      methods: {
        getData() {
          
          // console.log(this.urls.url_GetBloggerVM, this.accountId);
          
          // this.accountId = 'SHERRY'
          // console.log(this.accountId);
          this.initialLoading = true
          document.querySelector('body').style.overflow = 'hidden';
          axios.get(`${this.urls.url_GetBlog}/?accountId=${this.accountId}&id=${this.visitorId}`).then(res => {
            console.log(res);
            this.bloggerData = res.data
            this.$nextTick(() => {
              this.initialLoading = false
              document.querySelector('body').style.overflow = 'auto';
            });
          })
        },
        changeData(page){
          if (this.currentSelectPageInfo.current !== page){
            if (this.currentPage == '行程'){
              this.getBlogPlan(page)
            }
            else if(this.currentPage == '旅遊回憶'){
              this.getBlogJournal(page)
            }
            else if(this.currentPage == '景點收藏'){
              this.getBlogJournal(page)
            }
          }
        },
        intitialScroll(){
          window.scrollTo({
            top: 265,
            left: 0,
            behavior: 'instant'
          })
        },
        getFans(page){
          axios.get(`${this.urls.url_GetFans}/?accountId=${this.accountId}&id=${this.visitorId}&page=${page}`).then(res => {
            console.log(res);
            this.currentSelectPageInfo.total = Math.ceil(res.data / 6)
            this.currentSelectPageInfo.current = page
            this.currentPage = '粉絲'
            this.blogFans = res.data.BlogFans
          })
        },
        getBlogPlan(page){
          this.currentPage = '行程'
          this.intitialScroll();
          this.loading = true
          axios.get(`${this.urls.url_GetTotalCardNumerByState}?accountId=${this.accountId}&state=0`).then(res => {
            console.log(res.data);
            this.currentSelectPageInfo.total = Math.ceil(res.data / 6)
            this.currentSelectPageInfo.current = page
            console.log(this.page.total);
              axios.get(`${this.urls.url_GetBlogPlan}/?accountId=${this.accountId}&id=${this.visitorId}&page=${page}`).then(res => {
              console.log(res);
              this.selectBlogCard.selectBlogPlanCard = res.data
              this.loading = false
            })
          })
        },
        getBlogJournal(page){
          this.currentPage = '旅遊回憶'
          this.intitialScroll();
          this.loading = true
          axios.get(`${this.urls.url_GetTotalCardNumerByState}?accountId=${this.accountId}&state=2`).then(res => {
            this.currentSelectPageInfo.total = Math.ceil(res.data / 6)
            this.currentSelectPageInfo.current = page
            console.log(this.page.total);
              axios.get(`${this.urls.url_GetBlogJournal}/?accountId=${this.accountId}&id=${this.visitorId}&page=${page}`).then(res => {
              console.log(res);
              this.selectBlogCard.selectBlogJournalCard = res.data
              this.loading = false
            })
          })
        },
        getBlogLike(){
          this.currentPage = '讚'
          this.loading = true
          axios.get(`${this.urls.url_GetBlogLike}/?accountId=${this.accountId}&id=${this.visitorId}`).then(res => {
            console.log(res);
            this.currentSelectPageInfo.current = Math.ceil(res.data / 6)
            this.bloggerLikeData = res.data
            console.log(this.bloggerLikeData);
            
            this.loading = false
          })
        },
        getAttraction(){
          // this.currentPage = '景點收藏'
          axios.get(`${this.urls.url_GetAttraction}/${this.userId}`).then(res => {
            console.log(res);
            this.totalAttraction = res.data
            this.page.attractionPage = res.data.length
            this.currentSelectPageInfo.total = Math.ceil(res.data.length / 20)
          })
        },
        updateLike(item){
          console.log(item);
          let request = {
            UserId: this.visitorId,
            TripId: item.TripId
          }
          axios.put(this.urls.url_UpdateLike, request).then(res => {
            console.log(res);
            item.Like = !item.LikeOrNot ? item.Like - 1 : item.Like + 1
          })
        },
        minusIndex(){
          if (this.index - 1 >= 0){
            this.index = this.index - 1
            this.selectData = this.rawData[this.index]
          }
        },
        addIndex(){
          if (this.index + 1 < this.rawData.length ){
            this.index = this.index + 1
            this.selectData = this.rawData[this.index]
          }
        },
        updateTrace(userId, select){
          let request = {
            UserId: userId,
            FollowId: this.visitorId
          }
          console.log(request);
          
          axios.put(this.urls.url_UpdateTrace, request).then(res => {
            console.log(res);
            select.TraceOrNot = !select.TraceOrNot
          })
        },
        
        getInitialCradNumber(){
          axios.get(`${this.urls.url_GetTotalCardNumerByState}?accountId=${this.accountId}&state=0`).then(res => {
            this.page.planPage = res.data
          })
          axios.get(`${this.urls.url_GetTotalCardNumerByState}?accountId=${this.accountId}&state=2`).then(res => {
            this.page.journalPage = res.data
          })
          axios.get(`${this.urls.url_GetTotalCardNumberByState}?accountId=${this.accountId}&state=3`).then(res => {
            this.page.productPage = res.data
          })
          axios.get(`${this.urls.url_GetBlogFansNumber}?accountId=${this.accountId}`).then(res => {
            this.page.fansPage = res.data
          })
          axios.get(`${this.urls.url_GetTotalLikeCardNumber}?accountId=${this.accountId}&state=3`).then(res => {
            this.page.likePage = res.data
          })
        },
        getUserId(){
          axios.get(`${this.urls.url_GetUserId}/?accountId=${this.accountId}`).then(res => {
            this.userId = res.data
            this.getAttraction()
            this.getData();
          })
        },
        callUserPhoto() {
          console.log(this.$refs.userPhoto);
          this.$refs.userPhoto.click();
        },
        getUserPhoto(e){
          console.log('test');
          this.userPhotoReader.readAsDataURL(e.target.files[0])
        },
        updateUserPhoto(){
          console.log('update');
          let request = {
            api_key: '819392311777911',
            file: this.userPhotoReader.result,
            // reader.result：base64
            api_secret: 'vWFjIgauRBwpAcELX8a6hve-WZY',
            upload_preset: 'g0uupmf7'
          }
          console.log(request);
          
        },
        callUserCoverImg() {
          console.log(this.$refs.userPhoto);
          this.$refs.userPhoto.click();
        },
        getUserCoverImg(e){
          console.log('test');
          this.userCoverImgReader.readAsDataURL(e.target.files[0])
        },
        updateUserCoverImg(){
          console.log('update');
        }
      },
      components: {
        planJournalCard,
        productCard,
        loading
      },
      mounted() {
        // this.intitialScroll();
        this.getUserId();
        this.getInitialCradNumber();
        this.userPhotoReader = new FileReader()
        this.userPhotoReader.addEventListener('load', this.updateUserPhoto)
        this.userCoverImgReader = new FileReader()
        this.userCoverImgReader.addEventListener('load', this.updateUserPhoto)
      },
    }
    Vue.createApp(App).use(CKEditor).mount('#app')
  </script>
</body>

</html>