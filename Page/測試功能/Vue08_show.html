<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="https://unpkg.com/vue@next"></script>
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/element-plus/dist/index.css" />
  <script src="//cdn.jsdelivr.net/npm/element-plus"></script>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css"
    integrity="sha384-SZXxX4whJ79/gErwcOYf+zWLeJdY/qpuqC4cAa9rOGUstPomtqpuNWT9wdPEn2fk" crossorigin="anonymous">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css"
    integrity="sha384-SZXxX4whJ79/gErwcOYf+zWLeJdY/qpuqC4cAa9rOGUstPomtqpuNWT9wdPEn2fk" crossorigin="anonymous">
  <style>
    .test {
      width: 300px;
      height: 130px;
      top: 100px;
    }

    .test2 {
      width: 220px;
      font-size: 10px;
    }

    .test2 .el-notification__title {
      font-size: 14px;
    }

    .animate__animated.animate__fadeInDown {
      --animate-duration: 0.3s;
    }
    .participantPostNotify {
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
        font-weight: bold;
        text-decoration: none;
        color: #000
    }
    .AA::-webkit-scrollbar {
      display: none;
    }
    .tripParticipant-message {
            margin-right: 2px;
            width: 170px;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }
  </style>
</head>

<body>
  <div id="app">

    <div class="d-flex justify-content-between">
      <input type="text" name="" id="" v-model="name">
      <el-button plain @click="open1"> Success </el-button>
      <el-button plain @click="notify"> Use HTML String </el-button>
      <button v-on:click="tripGroupMessageNotify(testData)">testMessage</button>
      <button @click.stop="show = !show">show</button>
      <div style="margin-right: 50px; width: 30px; height: 30px; display: inline-block; cursor: pointer;"
        @click.stop="show = !show">
        <i class="fas fa-bell" style="padding: 10px; font-size: 20px;"></i>
      </div>
    </div>
    <hr>
    <div style="border: 1px solid #ddd; height: 70px; width: 250px;" class="d-flex">
      <div style="padding: 10px;">
        <img src="https://res.cloudinary.com/ditncduk1/image/upload/v1634543705/User/v1ybhqdxwvvaky41pil2.png" alt=""
          style="height: 100%; border-radius: 1000px; overflow: hidden;">
      </div>
      <div class="d-flex flex-column justify-content-evenly">
        <div style="font-size: 14px;"><span style="font-weight: bold;">Kevin</span>發佈了一則旅遊回憶</div>
        <div style="font-size: 12px; color: rgb(0, 119, 255);">幾秒鐘前</div>
      </div>
    </div>
    <hr>
    <div
      style="overflow: hidden; position: absolute; top: 50px; right: 10px; background-color: rgb(238, 238, 238); border-radius: 5px; overflow: hidden; box-shadow: -3px 14px 9px -7px rgba(186,186,186,0.5);"
      class="d-flex flex-end">
      <div class="animate__animated AA" :class="{'animate__fadeInDown': show}" style="height: 400px; overflow: auto;"
        v-show="show">
        <div style="border: 1px solid #ddd; height: 70px; width: 250px;" class="d-flex" v-for="item in 20">
          <div style="padding: 12px; ">
            <img src="https://res.cloudinary.com/ditncduk1/image/upload/v1634543705/User/v1ybhqdxwvvaky41pil2.png"
              alt="" style="height: 100%; border-radius: 1000px; overflow: hidden;">
          </div>
          <div class="d-flex flex-column justify-content-evenly">
            <div style="font-size: 14px;"><span style="font-weight: bold;">Kevin</span>發佈了一則旅遊回憶</div>
            <div style="font-size: 12px; color: rgb(0, 119, 255);">幾秒鐘前</div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    const { ElNotification } = ElementPlus;
    const App = {
      data() {
        return {
          img: 'https://res.cloudinary.com/ditncduk1/image/upload/v1634543705/User/v1ybhqdxwvvaky41pil2.png',
          name: '',
          show: false,
          testData: {
            UserName: "Kevin",
            UserPhoto: "https://res.cloudinary.com/ditncduk1/image/upload/v1633765873/User/e2qmuwkxojwgkrxcvakp.jpg",
            MessageContent: {
              Group: "「旅遊回憶測試」",
              Message: "哈囉"
            },
            AccountId: "SHERRY",
            TripId: 44
          } 
        }
      },
      methods: {
        notify() {
          ElNotification({
            title: '新通知',
            customClass: 'test',
            duration: 50000,
            dangerouslyUseHTMLString: true,
            message: `<div style=" height: 50px; width: 250px;" class="d-flex ">
                        <div style="padding: 5px 10px 5px 0px; ">
                          <img src="https://res.cloudinary.com/ditncduk1/image/upload/v1634543705/User/v1ybhqdxwvvaky41pil2.png" alt="" style="height: 100%; border-radius: 1000px; overflow: hidden;">
                        </div>
                        <div class="d-flex flex-column justify-content-evenly ms-1">
                          <div style="font-size: 14px;"><span style="font-weight: bold;">${this.name} </span>發佈了一則<a href="https://www.google.com/" style="text-decoration: none; color: #666; font-weight: bold""> 旅遊回憶：</a></div>
                          <div>「台北兩天一夜好好玩」</div>
                          <div style="font-size: 12px; color: rgb(0, 119, 255);" >幾秒鐘前</div>
                        </div>
                      </div>`
          })
        },
        tripGroupMessageNotify(messageContent) {
          console.log('content', messageContent);
          let source = this
          let link = `/${messageContent.AccountId}/trips/${messageContent.TripId}`
          ElNotification({
            title: '新通知',
            customClass: 'test',
            duration: 1000000,
            dangerouslyUseHTMLString: true,
            // onClick: function () {
            //     console.log(`${messageContent.AccountId}/trips/${messageContent.TripId}`)
            //     let location = `${messageContent.AccountId}/trips/${messageContent.TripId}`
            //     // 更新已讀
            //     axios.put(`${source.urls.url_UpdateNotificationState}${messageContent.NotificationId}`).then(res => {
            //         console.log(res);
            //         if (res.data.IsSuccessful) {
            //             window.location.href = location
            //         }
            //     })
            // },
            message: `<div style=" height: 70px; width: 250px; cursor: pointer;" class="d-flex ">
                        <div style="margin-right: 10px; height: 50px; width: 50px;">
                          <img src=${messageContent.UserPhoto} alt="" style="height: 100%; border-radius: 1000px; overflow: hidden; object-fit: cover; width: 100%; ">
                        </div>
                        <div class="d-flex flex-column justify-content-evenly">
                          <div style="font-size: 14px;">
                            <div class="tripParticipant-message">
                                <span style="font-weight: bold;">${messageContent.UserName}</span>
                                <span>回覆了</span>
                                <a :href="link()" class="participantPostNotify" title="${messageContent.MessageContent.Group}"> ${messageContent.MessageContent.Group}</a>
                            </div>
                            <div style="width: 170px">的旅遊群組</div>
                          <div style="font-size: 12px; color: rgb(0, 119, 255);" >幾秒鐘前</div>
                        </div>
                      </div>`
          })
        },
        open1() {
          ElNotification({
            customClass: 'test2',
            title: '已成功加入購物車',
            message: '',
            duration: 1000,
            type: 'success',
          })
        }
      },
      mounted() {
        let that = this
        document.addEventListener('click', (e) => {
          if (!that.$el.contains(e.target)) this.show = false
        })
      }

    }
    Vue.createApp(App).use(ElementPlus).mount('#app')
  </script>
</body>

</html>